<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="img/icon.png" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.3.2/math.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css"
      integrity="sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv"
      crossorigin="anonymous" />

    <!-- The loading of KaTeX is deferred to speed up page rendering -->
    <script
      src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js"
      integrity="sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O"
      crossorigin="anonymous"></script>

    <!-- To automatically render math in text elements, include the auto-render extension: -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/contrib/auto-render.min.js"
      integrity="sha384-yACMu8JWxKzSp/C1YV86pzGiQ/l1YUfE8oPuahJQxzehAjEt2GiQuy/BIvl9KyeF"
      crossorigin="anonymous"
      onload="renderMathInElement(document.body);"></script>
    <title>Neighbor-to-neighbor coupling</title>
  </head>
  <body>
    <section>
      <h1>Neighbor-to-neighbor coupling</h1>
      <p>
        Here is a basic app that simulates neighbor-to-neighbor coupling for a
        grid of phase oscillators. Each grid cell represents a single oscillator
        which is coupled directly to its 4 nearest neighbors via a Kuramoto
        style couping. All of the cells have their own intrinsic frequency which
        are gaussian distributed (as illustrated in the histrogram). You can
        control the parameters of this distribution. You can play around with
        the parameters of the model (might need to reset the simulations for
        most of them). The system is integrated with forward Euler and follows
        this dynamic: $$\frac{d\phi_{x,y}}{dt} = \omega_{x,y} + k \sum_{i=\{-1,
        1\}} \sum_{j=\{-1, 1\}} \sin(\phi_{x+i,\ y+j} - \phi_{x,y}) $$
      </p>
    </section>
    <section>
      <div>
        <div>
          <input
            type="range"
            min="0.0"
            value="1"
            max="4"
            class="slider"
            id="sliderCouplingStrength"
            oninput="this.nextElementSibling.value = 'k = ' +this.value; couplingStrength = this.value"
            step="0.1" />
          <output>k = 1</output>
        </div>

        <div>
          <input
            type="range"
            min="0.0"
            value="6.28"
            max="10"
            class="slider"
            id="sliderMeanFrequency"
            oninput="this.nextElementSibling.value = 'omega = ' +this.value; meanFrequency = this.value"
            step="0.1" />
          <output> omega = 6.28</output>
        </div>

        <div>
          <input
            type="range"
            min="0.0"
            value="0.01"
            max="5"
            class="slider"
            id="sliderRangeFrequency"
            oninput="this.nextElementSibling.value = 'σ =  ' +this.value; rangeFrequency = this.value"
            step="0.01" />
          <output> σ = 0.01</output>
        </div>

        <div>
          <input
            type="range"
            min="50"
            value="50"
            max="200"
            class="slider"
            id="sliderSizeX"
            oninput="this.nextElementSibling.value = 'size: ' +this.value; xl = this.value; yl = this.value"
            step="5" />
          <output> size = 50</output>
        </div>

        <button type="button" id="resetButtonID" onclick="loop_on = false">
          Reset
        </button>

        <button
          type="button"
          id="pauseButton"
          onclick="
          changeLabel()
            if (loopPause == false) {
              this.innerHTML = 'Resume'
              loopPause = true;
            } else {
              this.innerHTML = 'Pause'
              loopPause = false

            }
        ">
          Pause
        </button>
      </div>
    </section>

    <div id="histogramFrequencies">
      <!-- Plotly chart will be drawn inside this DIV -->
    </div>
    <div id="mainSim" style="height: 50%">
      <!-- Plotly chart will be drawn inside this DIV -->
    </div>
    <div
      style="background-color: blue; height: 40%"
      id="plotOrderParameter"></div>
    <script>
      function changeLabel() {
        const button = document.getElementById("pauseButton");
        button.innerHTML = "Button Clicked!";
      }
    </script>
    <script src="app.js"></script>
  </body>
</html>
